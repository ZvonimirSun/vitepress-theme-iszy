@use 'sass:color';
@use 'sass:map';
@use 'sass:meta';

@function vitepress-config($key) {
  @return map.get($vitepress_config_map, $key);
}


//
// Variables
// ==================================================


// Color system
// --------------------------------------------------
$whitesmoke   : #f5f5f5;
$gainsboro    : #eee;
$grey-lighter : #ddd;
$grey-light   : #ccc;
$grey         : #bbb;
$grey-dark    : #999;
$grey-dim     : #666;
$black-light  : #555;
$black-dim    : #333;
$black-deep   : #222;
$red          : #ff2a2a;
$blue-bright  : #87daff;
$blue         : #0684bd;
$blue-deep    : #262a30;
$orange       : #fc6423;


// Transition
// --------------------------------------------------
$transition-duration : .2s;
$transition-ease     : $transition-duration ease-in-out;
$transition-ease-in  : $transition-duration ease-in;
$transition-ease-out : $transition-duration ease-out;


// Scaffolding
// Settings for some of the most global styles.
// --------------------------------------------------
// Global text color on <body>
$text-color                   : $black-light;
$text-color-dark              : $grey-light;

// Global link color.
$link-color                   : $black-light;
$link-color-dark              : $grey-light;
$link-hover-color             : $black-deep;
$link-hover-color-dark        : $gainsboro;
$link-decoration-color        : $grey-dark;

$blockquote-color             : $grey-dim;
$blockquote-color-dark        : $grey;

// Global border color.
$border-color                 : $grey-light;

// Background color for <body>
$body-bg-color                : white;
$body-bg-color-dark           : #282828;
$content-bg-color             : white;
$content-bg-color-dark        : $black-dim;

// Selection
$selection-bg                 : $blue-deep;
$selection-color              : $gainsboro;
$selection-bg-dark            : $grey;
$selection-color-dark         : $black-dim;

// Dark mode color
$card-bg-color                : $whitesmoke;
$card-bg-color-dark           : $black-light;

$menu-item-bg-color           : $whitesmoke;
$menu-item-bg-color-dark      : $black-light;

$theme-color                  : #222;
$theme-color-dark             : #222;

$scheme-text-align            : center;

// Typography
// Font, line-height, and elements colors.
// --------------------------------------------------
@function get-font-family($config) {
  $custom-family: vitepress-config(unquote('font-#{$config}-family'));
  @return $custom-family;
}

// Font families.
$font-family-chinese      : 'PingFang SC', 'Microsoft YaHei';

//@if get-font-family('global') != null {
//  $font-family-base: get-font-family('global'), $font-family-chinese, sans-serif;
//} @else {
//  $font-family-base: $font-family-chinese, sans-serif;
//}

$font-family-base: get-font-family('global'), $font-family-chinese, sans-serif;

$font-family-logo         : $font-family-base;

$font-family-headings     : $font-family-base;

$font-family-posts        : $font-family-base;

$font-family-monospace    : 'JetBrains Mono', consolas, Menlo, monospace, $font-family-chinese;


// Font size
$font-size-base           : 1em;
$font-size-smallest       : .75em;
$font-size-smaller        : .8125em;
$font-size-small          : .875em;
$font-size-medium         : 1em;
$font-size-large          : 1.125em;
$font-size-larger         : 1.25em;
$font-size-largest        : 1.5em;


// Headings font size
$font-size-headings-step  : .125em;
$font-size-headings-base  : 1.625em;


// Global line height
$line-height-base         : 2;
$line-height-code-block   : 1.6; // Can't be less than 1.3;


// Z-index master list
// --------------------------------------------------
// Fix issue https://github.com/next-theme/theme-next-docs/issues/54
$zindex-0       : 5;
$zindex-1       : 10;
$zindex-2       : 20;
$zindex-3       : 30;
$zindex-4       : 40;
$zindex-5       : 50;


// Table
// --------------------------------------------------
$table-border-color             : $grey-lighter;
$table-font-size                : $font-size-small;
$table-cell-border-bottom-color : $grey-lighter;
$table-row-odd-bg-color         : #f9f9f9;
$table-row-odd-bg-color-dark    : #282828;
$table-row-hover-bg-color       : $whitesmoke;
$table-row-hover-bg-color-dark  : #363636;


// Code & Code Blocks
// --------------------------------------------------
$code-font-family               : $font-family-monospace;

$highlight-background        : #f3f3f3;
$highlight-foreground        : #444;
$highlight-gutter-background : color.mix($highlight-background, $highlight-foreground, 90%);
$highlight-gutter-foreground : color.mix($highlight-background, $highlight-foreground, 10%);

$highlight-background-dark        : #1c1b1b;
$highlight-foreground-dark        : #fff;
$highlight-gutter-background-dark : color.mix($highlight-background-dark, $highlight-foreground-dark, 90%);
$highlight-gutter-foreground-dark : color.mix($highlight-background-dark, $highlight-foreground-dark, 10%);


// Buttons
// --------------------------------------------------
$btn-default-radius                    : 0;
$btn-default-bg                        : $black-deep;
$btn-default-bg-dark                   : $black-deep;
$btn-default-color                     : white;
$btn-default-color-dark                : $text-color-dark;
$btn-default-border-color              : $black-deep;
$btn-default-border-color-dark         : $black-light;
$btn-default-hover-bg                  : white;
$btn-default-hover-bg-dark             : $grey-dim;
$btn-default-hover-color               : $black-deep;
$btn-default-hover-color-dark          : $text-color-dark;
$btn-default-hover-border-color        : $black-deep;
$btn-default-hover-border-color-dark   : $grey-dim;


// Pagination
// --------------------------------------------------
$pagination-border              : $gainsboro;

$pagination-link-bg             : transparent;
$pagination-link-color          : $link-color;
$pagination-link-border         : $gainsboro;

$pagination-link-hover-bg       : transparent;
$pagination-link-hover-color    : $link-color;
$pagination-link-hover-border   : var(--link-hover-color);

$pagination-active-bg           : $grey-light;
$pagination-active-color        : var(--content-bg-color);
$pagination-active-border       : $grey-light;


// Layout sizes
// --------------------------------------------------
$content-desktop                : 700px;
$content-desktop-large          : 800px;
$content-desktop-largest        : 900px;

$content-desktop-padding        : 40px;
$content-tablet-padding         : 10px;
$content-mobile-padding         : 8px;


// Headband
// --------------------------------------------------
$headband-height                : 3px;
$headband-bg                    : var(--theme-color);


// Site Meta
// --------------------------------------------------
$brand-color                    : white;
$brand-hover-color              : white;
$brand-color-dark               : $grey-lighter;
$brand-hover-color-dark         : $grey-lighter;
$brand-padding                  : 0 40px;

$site-subtitle-margin           : 10px 0;

$font-size-title                : 1.375em;
$font-size-subtitle             : $font-size-smaller;
$subtitle-color                 : $grey-dark;
$site-subtitle-color            : $grey-dark;


// Posts Collpase
// --------------------------------------------------
$posts-collapse-margin          : 35px;
$posts-collapse-margin-mobile   : 0;


// Tag Cloud
// --------------------------------------------------
$tag-cloud-start      : #aaa;
$tag-cloud-end        : #111;
$tag-cloud-start-dark : #555;
$tag-cloud-end-dark   : #eee;


// Sidebar
// Variables for sidebar section elements.
// --------------------------------------------------

$sidebar-width                        : 320;
$sidebar-width-expanded               : #{$sidebar-width}px;
$sidebar-padding                      : 18px;
$sidebar-offset                       : 12px;
$sidebar-nav-color                    : $grey-dim;
$sidebar-nav-hover-color              : $whitesmoke;
$sidebar-highlight                    : $blue-bright;

$site-author-image-width              : 96px;
$site-author-image-border-width       : 2px;
$site-author-image-border-color       : $black-dim;

$site-author-name-margin              : 5px 0 0;
$site-author-name-color               : $whitesmoke;
$site-author-name-weight              : normal;

$site-description-font-size           : $font-size-medium;
$site-description-color               : $grey-dark;
$site-description-margin-top          : 5px;

$site-state-item-count-font-size      : $font-size-larger;
$site-state-item-name-font-size       : $font-size-small;
$site-state-item-name-color           : inherit;


// Components
// --------------------------------------------------
// Back to top
$b2t-opacity                  : .8;
$b2t-opacity-hover            : 1;
$b2t-position-bottom          : -100px;
$b2t-position-bottom-on       : 30px;
$b2t-position-right           : 30px;
$b2t-position-right-mobile    : 20px;
$b2t-font-size                : 12px;
$b2t-color                    : white;
$b2t-bg-color                 : $black-deep;

$sidebar-toggle-inner-size    : 16px;
$sidebar-toggle-padding       : 5px;
$sidebar-toggle-size          : $sidebar-toggle-inner-size + $sidebar-toggle-padding * 2;
$sidebar-toggle-alignment     : 'left';

//  .post-expand .post-eof
//  In Muse scheme, margin above and below the post separator
$post-eof-margin-top          : 80px; //  or 160px for more white space;
$post-eof-margin-bottom       : 60px; //  or 120px for less white space;

$post-card-margin             : 1em 0 0;
$post-reward-img-width        : 180px;
$post-followme-img-width      : $post-reward-img-width;


// Note colors
// --------------------------------------------------
// Read note light_bg_offset from NexT config and set in '$lbg%' to use it as string variable.
$lbg : 0;
$note-types : 'default' 'primary' 'info' 'success' 'warning' 'danger';

$note-border-radius         : 3px;

$note-border : (
  default : #777,
  primary : #6f42c1,
  info    : #428bca,
  success : #5cb85c,
  warning : #f0ad4e,
  danger  : #d9534f
);

$note-bg : (
  default : color.adjust(map.get($note-border, default), $hue: 0, $lightness: 94% + $lbg),
  primary : color.adjust(map.get($note-border, primary), $hue: 10, $lightness: 92% + $lbg),
  info    : color.adjust(map.get($note-border, info), $hue: -10, $lightness: 91% + $lbg),
  success : color.adjust(map.get($note-border, success), $hue: 10, $lightness: 90% + $lbg),
  warning : color.adjust(map.get($note-border, warning), $hue: 10, $lightness: 88% + $lbg),
  danger  : color.adjust(map.get($note-border, danger), $hue: -10, $lightness: 92% + $lbg)
);

$note-text : (
  default : map.get($note-border, default),
  primary : map.get($note-border, primary),
  info    : map.get($note-border, info),
  success : map.get($note-border, success),
  warning : map.get($note-border, warning),
  danger  : map.get($note-border, danger)
);

$note-icon : (
  default : '\f0a9',
  primary : '\f055',
  info    : '\f05a',
  success : '\f058',
  warning : '\f06a',
  danger  : '\f056'
);

$note-modern-border : (
  default : #e1e1e1,
  primary : #e1c2ff,
  info    : #b3e5ef,
  success : #d0e6be,
  warning : #fae4cd,
  danger  : #ebcdd2
);

$note-modern-bg : (
  default : color.adjust(map.get($note-modern-border, default), $hue: 10, $lightness: 60% + ($lbg * 4)),
  primary : color.adjust(map.get($note-modern-border, primary), $hue: 10, $lightness: 40% + ($lbg * 4)),
  info    : color.adjust(map.get($note-modern-border, info), $hue: 10, $lightness: 50% + ($lbg * 4)),
  success : color.adjust(map.get($note-modern-border, success), $hue: 10, $lightness: 40% + ($lbg * 4)),
  warning : color.adjust(map.get($note-modern-border, warning), $hue: 10, $lightness: 43% + ($lbg * 4)),
  danger  : color.adjust(map.get($note-modern-border, danger), $hue: 10, $lightness: 35% + ($lbg * 4))
);

$note-modern-text : (
  default : $grey-dim,
  primary : #6f42c1,
  info    : #31708f,
  success : #3c763d,
  warning : #8a6d3b,
  danger  : #a94442
);

$note-modern-hover : (
  default : color.adjust(map.get($note-modern-text, default), $hue: -10, $lightness: -32%),
  primary : color.adjust(map.get($note-modern-text, primary), $hue: -10, $lightness: -22%),
  info    : color.adjust(map.get($note-modern-text, info), $hue: -10, $lightness: -32%),
  success : color.adjust(map.get($note-modern-text, success), $hue: -10, $lightness: -27%),
  warning : color.adjust(map.get($note-modern-text, warning), $hue: -10, $lightness: -18%),
  danger  : color.adjust(map.get($note-modern-text, danger), $hue: -10, $lightness: -22%)
);

@function transform-map($map, $transform-fn) {
  $new-map: ();
  @each $key, $val in $map {
    $new-val: meta.call(meta.get-function($transform-fn), $val);
    $new-map: map.merge($new-map, ($key: $new-val));
  }
  @return $new-map;
}

@function lighten-10($val) {
  @return color.adjust($val, $lightness: 10%);
}

@function darken-10($val) {
  @return color.adjust($val, $lightness: -10%);
}

@function hover-lighten-75($val) {
  @return color.adjust($val, $lightness: 75%);
}

@function desaturate-darken-20($val) {
  @return color.adjust($val, $lightness: -20%, $saturation: -20%);
}

$note-modern-border-dark : transform-map($note-modern-hover, 'lighten-10');
$note-modern-bg-dark     : transform-map($note-modern-text, 'desaturate-darken-20');
$note-modern-text-dark   : transform-map($note-modern-bg, 'darken-10');
$note-modern-hover-dark  : transform-map($note-modern-border, 'hover-lighten-75');

// Tabs border radius
// --------------------------------------------------
$tbr                        : 0;


// Label colors
// --------------------------------------------------
$label : (
  default : color.adjust(map.get($note-border, default), $hue: 0, $lightness: 89% + $lbg),
  primary : color.adjust(map.get($note-border, primary), $hue: 10, $lightness: 87% + $lbg),
  info    : color.adjust(map.get($note-border, info), $hue: -10, $lightness: 86% + $lbg),
  success : color.adjust(map.get($note-border, success), $hue: 10, $lightness: 85% + $lbg),
  warning : color.adjust(map.get($note-border, warning), $hue: 10, $lightness: 83% + $lbg),
  danger  : color.adjust(map.get($note-border, danger), $hue: -10, $lightness: 87% + $lbg)
);


// Badge colors
// --------------------------------------------------
$badge-padding : 1px 4px;
$badge-border-radius : 0;
$badge-background : $gainsboro;
$badge-color : $black-light;
$badge-text-shadow : none;


$watermark-opacity : .1;
